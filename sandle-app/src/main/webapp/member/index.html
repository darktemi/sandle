<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>sandle 회원</title>
    <link
      rel="stylesheet"
      href="../node_modules/bootstrap/dist/css/bootstrap.css"
    />
    <link rel="stylesheet" href="index.css" />
>    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
  </head>
  <body>
    <h1>User</h1>

    <aside>
      <div>
        <input type="text" name="keyword" value="" />
        <button id="btn-search" type="button">검색</button>
      </div>
      <table id="member-table" border="1">
        <thead>
          <tr>
            <th>번호</th>
            <th>이름</th>
            <th>전화</th>
            <th>이메일</th>
            <th>프로필 사진</th>
            <th>닉네임</th>
            <th>우편번호</th>
            <th>기본주소</th>
            <th>상세주소</th>
            <th>생년월일</th>
            <th>상태메세지</th>
            <th>가입일</th>
            <th>권한</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </aside>

    <article>
      <form id="member-form" action="update" method="post">
        <div id="head">
          <p>회원가입</p>
        </div>
        <div id="head-next">
          <p>회원이 되어 다양한 서비스를 경험해 보세요!</p>
        </div>
          <div class="edit">
            <b>번호</b><br>
            <input class="sign-input" id="m-no" type="text" name="no" readonly />
          </div>
          <div>
            <b>이메일</b><br>
              <input class="sign-input" id="m-email" type="text" placeholder="이메일을 입력해주세요" name="email" /></td>
              <button id = "id-button" type="button" class="input btn btn-success btn-lg btn-block">중복확인</button>
              <!-- <span id="id-msg1" display="none" font-color="red">"ID가 중복입니다!"</span>
              <span id="id-msg2" display="none">"사용가능한 ID입니다."</span>
              <span id="id-msg3" display="none">"ID를 입력하세요!"</span> -->
          </div>
          <div>
            <b>비밀번호</b><br>
            <input class="sign-input" id="m-password" type="password" placeholder="비밀번호 입력(문자, 숫자, 특수문자 포함(8~20자))" name="password" />
          </div>
            <div>
            <b>이름</b><br>
            <input class="sign-input" id="m-name" type="text" placeholder="이름을 입력해주세요" name="name" />
            </div>
            <div>
              <b>닉네임</b><br>
              <input class="sign-input" id="m-nickname" type="text" placeholder="닉네임을 입력해주세요" name="nickname" />
            </div>
          <div>
            <b>전화</b><br>
            <input class="sign-input" id="m-tel" type="tel" placeholder="휴대폰 번호('-' 제외 11자리 입력)" name="tel" />
          </div>
          <div  class="edit">
            <b>프로필 사진</b><br>
            <input class="sign-input" id="m-photo" type="text" name="photo" />
          </div>
          <div>
            <b>우편번호</b><br>
            <input class="sign-input" id="m-postNo" type="text" name="postNo" readonly />
            <input type="button" id="find-button" onclick="sample6_execDaumPostcode()" value="우편번호 찾기">
          </div>
          <div>
            <b>기본주소</b><br>
            <input class="sign-input" id="m-basicAddress" type="text" name="basicAddress" readonly />
          </div>
          <div>
            <b>상세주소</b><br>
            <input class="sign-input" id="m-detailAddress" type="text" name="detailAddress" />
          </div>
          <div>
            <b>생년월일</b><br>
            <input class="sign-input" id="m-birth" type="date" name="birth" />
          </div>
          <div class="edit">
            <b>상태메세지</b><br>
            <input class="sign-input" id="m-statusMessage" type="text" name="statusMessage" />
          </div>
          <div class="edit">
            <b>가입일</b><br>
            <span id="m-createdDate"></span>
          </div>
          <div class="edit">
            <b>권한</b><br>
            <input class="sign-input" id="m-authority" type="text" name="authority" />
          </div>

        <div>
          <button id="btn-insert" type="button" class="input btn btn-success btn-lg btn-block">가입하기</button>
          <button id="btn-update" type="button" class="edit">변경</button>
          <button id="btn-delete" type="button" class="edit">삭제</button>
          <button id="btn-cancel" type="reset" class="input btn btn-secondary btn-lg btn-block">가입취소</button>
        </div>
      </form>
    </article>

    <script id="tr-template" type="text/x-handlebars-template">
      {{#each this}}
        <tr data-no="{{no}}" onclick="getSmember(event)">
          <td>{{no}}</td>
          <td>{{name}}</td>
          <td>{{tel}}</td>
          <td>{{email}}</td>
          <td>{{id}}</td>
          <td>{{photo}}</td>
          <td>{{nickname}}</td>
          <td>{{postNo}}</td>
          <td>{{basicAddress}}</td>
          <td>{{detailAddress}}</td>
          <td>{{birth}}</td>
          <td>{{statusMessage}}</td>
          <td>{{createdDate}}</td>
          <td>{{authority}}</td>
        </tr>
      {{/each}}
    </script>

    <script src="../node_modules/handlebars/dist/handlebars.js"></script>
    <script src="../node_modules/bootstrap/dist/js/bootstrap.bundle.js"></script>
    <script src="index.js"></script>
  </body>
  <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<script>
    function sample6_execDaumPostcode() {
        new daum.Postcode({
            oncomplete: function(data) {
                // 팝업에서 검색결과 항목을 클릭했을때 실행할 코드를 작성하는 부분.

                // 각 주소의 노출 규칙에 따라 주소를 조합한다.
                // 내려오는 변수가 값이 없는 경우엔 공백('')값을 가지므로, 이를 참고하여 분기 한다.
                var addr = ''; // 주소 변수
                var extraAddr = ''; // 참고항목 변수

                //사용자가 선택한 주소 타입에 따라 해당 주소 값을 가져온다.
                if (data.userSelectedType === 'R') { // 사용자가 도로명 주소를 선택했을 경우
                    addr = data.roadAddress;
                } else { // 사용자가 지번 주소를 선택했을 경우(J)
                    addr = data.jibunAddress;
                }

                // 사용자가 선택한 주소가 도로명 타입일때 참고항목을 조합한다.
                if(data.userSelectedType === 'R'){
                    // 법정동명이 있을 경우 추가한다. (법정리는 제외)
                    // 법정동의 경우 마지막 문자가 "동/로/가"로 끝난다.
                    if(data.bname !== '' && /[동|로|가]$/g.test(data.bname)){
                        extraAddr += data.bname;
                    }
                    // 건물명이 있고, 공동주택일 경우 추가한다.
                    if(data.buildingName !== '' && data.apartment === 'Y'){
                        extraAddr += (extraAddr !== '' ? ', ' + data.buildingName : data.buildingName);
                    }
                    // 표시할 참고항목이 있을 경우, 괄호까지 추가한 최종 문자열을 만든다.
                    // if(extraAddr !== ''){
                    //     extraAddr = ' (' + extraAddr + ')';
                    // }
                    // 조합된 참고항목을 해당 필드에 넣는다.
                    // document.getElementById("sample6_extraAddress").value = extraAddr;
                
                 } 
                //else {
                //     document.getElementById("sample6_extraAddress").value = '';
                // }

                // 우편번호와 주소 정보를 해당 필드에 넣는다.
                document.getElementById('m-postNo').value = data.zonecode;
                document.getElementById("m-basicAddress").value = addr;
                // 커서를 상세주소 필드로 이동한다.
                document.getElementById("m-detailAddress").focus();
            }
        }).open();
    }
</script>


</html>
